<html>
  <head>
    <meta charset="utf-8" content="text/html">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Eli's Site</title>

    <link rel="stylesheet" href="./styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script src="https://kit.fontawesome.com/b3d2e761cc.js" crossorigin="anonymous"></script>

    <script src="./util.js" type="module"></script>
  </head>
  <body>
    <script>
      pages = ["home", "resume", "blog", "stats"];

      // Upon site load, try to determine what page to load into.
      window.addEventListener("load", () => {
        const url = window.location.href;
        if (url.includes("#")) {
          const idx = url.indexOf("#") + 1;
          const end = url.indexOf("/", idx);
          setPage(url.substring(idx, end === -1 ? undefined : end));
        } else {
          // Automatically go #home, but don't register it as a historical event
          setPage('home', true);
        }
      });

      // Because I decided to use the history, we have to load the popped page
      // without updating history
      window.addEventListener("popstate", (e) => {
        setPage(e.state, true);
      });

      const pagePath = (page) => {
        if (!pages.includes(page)) {
          page = "404/";
        }
        return "./pages/" + page;
      }

      const setPage = (page, skipState) => {
        // Clear
        $("#content").attr("src", "");
        // Set history
        if (!skipState) {
          history.pushState(page, "", `/#${page}`);
        } else {
          history.replaceState(page, "", `/#${page}`)
        }
        $("#content").attr("src", pagePath(page));
      }
    </script>

    <!-- Primary buttons to lead to other pages -->
    <div id="main">
      <div id="nav">
        <div id="main-nav">
          <button class="icon" title="Home" onclick="setPage('home')">
            <i class="fa-solid fa-house fa-xl"></i>
          </button>
          <button class="icon" title="Resume" onclick="setPage('resume')">
            <i class="fa-solid fa-scroll fa-xl"></i>
          </button>
          <button class="icon" title="Blog" onclick="setPage('blog')">
            <i class="fa-solid fa-blog fa-xl"></i>
          </button>
          <button class="icon" title="Freelance" onclick="setPage('freelance')">
            <i class="fa-solid fa-briefcase fa-xl"></i>
          </button>
          <button class="icon" title="Stats" onclick="setPage('stats')">
            <i class="fa-solid fa-chart-pie fa-xl"></i>
          </button>
        </div>

        <!--
        <button class="icon" style="background: transparent; border: none;" title="Expand Sidebar">
          <i class="fa-solid fa-arrows-left-right-to-line fa-xl"></i>
        </button>
        -->
      </div>
      <iframe id="content" class="frameless"></iframe>
    </div>
  </body>
</html>